"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}(function(){var canvas=document.getElementsByTagName("canvas")[0];var c=canvas.getContext("2d");var PR=window.devicePixelRatio||1;canvas.width=window.innerWidth*PR*0.4;canvas.height=window.innerHeight*PR;c.scale(PR,PR);c.globalAlpha=0.2;var size=Math.max(canvas.width/20,100);var step=size/2;var noise=100;var TAU=Math.PI*2;function getNextX(prevX){var off=(Math.random()-0.5)*noise;var newX=prevX+off;return newX>canvas.width||newX<0?getNextX(prevX):newX}var Ribbon=function(){function Ribbon(si,st){_classCallCheck(this,Ribbon);this.numPts=Math.floor(Math.random()*3)+3;this.size=si||size;this.step=st||step;this.offset=Math.random();this.pts=[];this.hue=Math.floor((Math.random()-0.5)*0.2);this.pts.push({x:canvas.width*this.offset+this.step,y:0});this.pts.push({x:canvas.width*this.offset-this.step,y:0});for(var i=0;i<this.numPts-2;i++){this.pts.push({x:canvas.width*this.offset+this.step*(Math.random()-0.5),y:0})}}_createClass(Ribbon,[{key:"shouldUpdate",value:function shouldUpdate(){return this.pts[this.pts.length-1].y<canvas.height+this.step}},{key:"update",value:function update(){c.beginPath();c.moveTo(this.pts[0].x,this.pts[0].y);for(var i=1;i<this.pts.length;i++){c.lineTo(this.pts[i].x,this.pts[i].y)}var next={x:getNextX(this.pts[this.pts.length-1].x),y:this.pts[this.pts.length-1].y+(Math.random()*2-0.25)*this.step};c.lineTo(next.x,next.y);c.closePath();this.hue-=TAU/100;var r=Math.sin(this.hue+Math.PI/3*0)*127+128<<16;var g=Math.sin(this.hue+Math.PI/3*1)*127+128<<8;var b=Math.sin(this.hue+Math.PI/3*2)*127+128<<1;c.fillStyle="#"+(r|g|b).toString(16);c.fill();for(var _i=0;_i<this.pts.length-1;_i++){this.pts[_i]=this.pts[_i+1]}this.pts[this.pts.length-1]=next}}]);return Ribbon}();var ribbons=[];function init(){for(var i=0;i<Math.min(canvas.width/50,10);i++){ribbons.push(new Ribbon)}draw()}function draw(){var shouldUpdate=false;for(var i=0;i<ribbons.length;i++){if(ribbons[i].shouldUpdate()){ribbons[i].update();shouldUpdate=true}}if(shouldUpdate)requestAnimationFrame(draw)}var fired=false;window.addEventListener("scroll",function(e){if(!fired&&window.scrollY>window.innerHeight/2){init();fired=true}})})();